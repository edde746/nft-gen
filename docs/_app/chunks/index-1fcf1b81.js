"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}});const c=t=>new DataView(new ArrayBuffer(t)),A=t=>new Uint8Array(t.buffer||t);function l(t,n,e){if(n===void 0||n instanceof Uint8Array||(n=f(n)),e===void 0||e instanceof Date||(e=new Date(e)),t instanceof File)return{o:n||f(t.name),i:e||new Date(t.lastModified),A:t.stream()};if(t instanceof Response){const i=t.headers.get("content-disposition"),s=i&&i.match(/;\s*filename\*?=["']?(.*?)["']?$/i),o=s&&s[1]||new URL(t.url).pathname.split("/").pop(),a=o&&decodeURIComponent(o);return{o:n||f(a),i:e||new Date(t.headers.get("Last-Modified")||Date.now()),A:t.body}}if(!n||n.length===0)throw new Error("The file must have a name.");if(e===void 0)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(typeof t=="string")return{o:n,i:e,A:f(t)};if(t instanceof Blob)return{o:n,i:e,A:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{o:n,i:e,A:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{o:n,i:e,A:A(t)};if(Symbol.asyncIterator in t)return{o:n,i:e,A:u(t)};throw new TypeError("Unsupported input format.")}function u(t){const n="next"in t?t:t[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let i=0;for(;e.desiredSize>i;){const s=await n.next();if(!s.value){e.close();break}{const o=U(s.value);e.enqueue(o),i+=o.byteLength}}}})}function U(t){return typeof t=="string"?f(t):t instanceof Uint8Array?t:A(t)}function f(t){return new TextEncoder().encode(String(t))}const p=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBw0DAW0CAAF0AAABYwABCpUBAkkBA38DQCABIQBBACECA0AgAEEBdiAAQQFxQaCG4u1+bHMhACACQQFqIgJBCEcNAAsgAUECdCAANgIAIAFBAWoiAUGAAkcNAAsLSQEBfyABQX9zIQFBgIAEIQJBgIAEIABqIQADQCABQf8BcSACLQAAc0ECdCgCACABQQh2cyEBIAJBAWoiAiAASQ0ACyABQX9zuAs"),t=>t.charCodeAt(0)))),{t:w,c:g,m:h}=p.exports;w();const B=A(h).subarray(65536);function d(t,n=0){for(const e of function*(i){for(;i.length>65536;)yield i.subarray(0,65536),i=i.subarray(65536);i.length&&(yield i)}(t))B.set(e),n=g(e.length,n);return n}function y(t,n,e=0){const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,s=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;n.setUint16(e,i,1),n.setUint16(e+2,s,1)}function b(t){const n=c(30);return n.setUint32(0,1347093252),n.setUint32(4,335546368),y(t.i,n,10),n.setUint16(26,t.o.length,1),A(n)}async function*C(t){let{A:n}=t;if("then"in n&&(n=await n),n instanceof Uint8Array)yield n,t.u=d(n,0),t.l=n.length;else{t.l=0;const e=n.getReader();for(;;){const{value:i,done:s}=await e.read();if(s)break;t.u=d(i,t.u),t.l+=i.length,yield i}}}function m(t){const n=c(16);return n.setUint32(0,1347094280),n.setUint32(4,t.u,1),n.setUint32(8,t.l,1),n.setUint32(12,t.l,1),A(n)}function Q(t,n){const e=c(46);return e.setUint32(0,1347092738),e.setUint32(4,352523264),e.setUint16(8,2048),y(t.i,e,12),e.setUint32(16,t.u,1),e.setUint32(20,t.l,1),e.setUint32(24,t.l,1),e.setUint16(28,t.o.length,1),e.setUint16(40,33204,1),e.setUint32(42,n,1),A(e)}const I=t=>new Response(u(async function*(n){const e=[];let i=0,s=0;for await(const r of n)yield b(r),yield r.o,yield*C(r),yield m(r),e.push(Q(r,i)),e.push(r.o),s++,i+=46+r.o.length+r.l;let o=0;for(const r of e)yield r,o+=r.length;const a=c(22);a.setUint32(0,1347093766),a.setUint16(8,s,1),a.setUint16(10,s,1),a.setUint32(12,o,1),a.setUint32(16,i,1),yield A(a)}(async function*(n){for await(const e of n)e instanceof File||e instanceof Response?yield l(e):yield l(e.input,e.name,e.lastModified)}(t))),{headers:{"Content-Type":"application/zip","Content-Disposition":"attachment"}});export{I as downloadZip};
